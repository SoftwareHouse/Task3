<!DOCTYPE html>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/"
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=yes"/>
<html>
    <head>
        <title>2450_刘翘楚 实验报告</title>
    </head>
    <body>
<BODY bgcolor="#FFCCFF" background="img/bg.jpg" >
<FONT  size="+5" face="华文新魏">
<center>
<h3>C++程序设计实践<br/>
Task1——文件读写操作&nbsp;实验报告<br/>
24320132202450 &nbsp;  刘翘楚<br/>
<h3>
</center><br/></font>
<p style="font-weight:bold">一、	需求分析（功能点清单）</p><br/>
&nbsp;学生评分系统内容十分丰富，工作繁多。本评分系统用于处理小学期C++程序设计实践课程的学生信息以及课堂演示评分信息的读取与录入。本评分系统提供以下两方面服务：<br/>
①	从文件读写学生信息（包括机位号，姓名，及学号）。<br/>
②	从文件获取学生分数并与学生信息对应输出至文件中。<br/><br/>
<p style="font-weight:bold">二、	设计</p><br/>
1.	解决方案<br/>
&nbsp;收集信息的机制：同学们将学生信息，以及针对演示者的评分分别输入至SVN中的两个文件里。<br/>
&nbsp;课堂演示评分标准：需求分析与设计等（满分2分），调试与测试过程（满分3分），思维逻辑（满分2分），新颖度（满分2分），演讲（满分1分）。<br/>
&nbsp;本程序运用C语言实现，主要应用文件的读写、输入输出功能，并配合SVN服务器以作收集信息之用。首先设置学生结构体（含机位号，姓名，学号，分数结构体）和分数结构体（含机位号，分数1，分数2……分数5），格式界面的输出（“欢迎进入学生评分系统”），和菜单的输出，菜单下设功能及简要描述，用户根据描述输入数字进入相关功能（程序进入相关函数）。<br/>
&nbsp;SVN上存好完整学生数据之后，程序通过路径实现对数据文件的访问（手动输入路径，确保在文件路径改变程序无需进行改动，下同），fread将数据存入内存，再通过fwrite写进新文件中，实现学生信息的读写。在演示评分环节中，同学们在SVN的新建文档中以“机位号  需求分析与设计分  调试与测试过程分  思维逻辑分  新颖度分  演讲分”的格式为演示者评分，本程序通过路径实现对数据文件的访问，以上述格式将分数信息和学生信息一同循环fscanf进内存中，比较成绩文件中的机位号和学生信息中的机位号，若相同，则成绩属于该名同学，设置变量计算同学们对该同学的分数1，分数2……分数5之和，除以参与评分的同学数（count），即可得出该同学每方面成绩的平均分，从而得知自己哪方面，比如思维逻辑环节，还有欠缺，需要加以改正。而分数1，分数2……分数5之和即为该同学的总得分。<br/>
&nbsp;使用时，用户通过运行本系统即可读取、输出学生信息至文件，计算学生成绩并得出完整的“成绩录入”文件。<br/><br/>
2.	核心业务流程图<br/>
<img src="img/10.png"><br/><br/>
3.	数据结构分析<br/>
&nbsp;程序运行需要程序体（包含“学生”和“成绩”2个结构体定义，），学生信息数据文件，学生成绩数据文件共3部分。<br/>
&nbsp;main函数主要包含菜单menu函数声明，界面输出，以及menu函数运行。<br/>
&nbsp;menu函数中拥有进入功能函数（read函数和score函数）的端口，按照菜单说明输入数字即可通过switch结构进入相应函数。<br/>
&nbsp;read函数要求用户输入学生数据存放地址，从中读入并输出至指定位置的文件中。<br/>
&nbsp;score函数同样要求用户输入学生数据存放地址以及学生成绩存放地址，通过匹配学生信息数据中的机位号和学生成绩中的机位号将成绩添加入学生信息数据的结构体中。<br/><br/>
<p style="font-weight:bold">三、	调试过程</p><br/>
&nbsp;在调试中出现出现0x00000000 处未处理的异常: 0xC0000005: Access violation问题，成绩只能读入第一个数据，不能读入之后数据等等，将数据输出至文件中出现许多0，以及输出了 -1.#IND00.-1.#IND00等等。<br/><br/>
&nbsp;如图，通过设置断点等方式，先后发现了fscanf使用过程中格式出错（文件中以空格区分数据，程序中却以逗号区分，还有忘记加&符号）；因机位号设置为int型导致无法判别大小（比如机位号是3号时，文件中以03书写，导致无法比较）；丢掉语句“feek”，未重设total值，一次循环结束时未将文件指针指向文件头导致只循环一次就跳出，数据出错等等问题。<br/>
<img src="img/1.png"><br/>
<img src="img/3.png"><br/>
<img src="img/7.png"><br/><br/>
<p style="font-weight:bold">四、	测试过程</p><br/>
1.自己设置的成绩文件以供成绩测试。<br/>
<img src="img/2.png"><br/><br/>
2.程序出错时所有数据均为0。<br/>
<img src="img/4.png"><br/><br/>
3.程序界面。
（实现1功能）<br/>
<img src="img/5.png"><br/><br/>
4.（实现2功能）<br/>
<img src="img/6.png"><br/><br/>
5.输出至文件。（学生信息）<br/>
<img src="img/8.png"><br/><br/>
6.登入成绩后的学生信息。（因为供测试使用，只录入了前4位同学的成绩）。<br/>
<img src="img/9.png"><br/><br/><br/>
<p style="font-weight:bold">五、	本次实验特别之处</p><br/>
      &nbsp;本次实验几乎算是我第一次用编程来解决实际问题，在此次实验之前，我对编程的理解仍停留在做计算，做链表……但并不能将它们与实际融会贯通。经过这次实验我最大的感受就是在编程之前需要对软件的需求做详尽的分析，并有针对性的进行逻辑思考，在动手做之前要想清楚自己每一步要做什么，不然只是无头苍蝇乱飞，在代码较长时是根本行不通的。在本次实验中，我调试代码的能力增强了。不同于以往的上机作业，本次大作业没有标准答案，每个人对于程序的理解也不同，我们只能独立思考，针对出现的各种问题上网查找解决方案，而且网上的解决方案并不一定是适宜于自己的情况的。在这样的情况下，只单单通过看代码找错误几乎永远不可能跑出程序，于是只有设断点，查变量……在这次实验中我真切感受到了调试的重要性。我的编程能力并不是很好，这次实验中遇到不少问题，但是最终在认真查找资料的情况下将问题一一解决，看到程序跑出来之后是非常开心的。我对文件输入输出有了更深一步的学习，也加深了C语言的诸多格式要求在我脑海中的印象，编程能力得到了增强，是很有意义的一次实验。
</body>
</html>